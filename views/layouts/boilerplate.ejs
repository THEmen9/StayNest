<!DOCTYPE html>
<html>
<head>
    <title>StayNest</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" 
      rel="stylesheet">
      <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

</head>

 <body class="layout-body d-flex flex-column min-vh-100">

  

  <%- include("../includes/navbar") %>

  <div class="layout-container flex-grow-1">
    <%- include("../includes/sidebar") %>

    <main class="main-content">
      <%- body %>
    </main>
  </div>

  <%- include("../includes/footer") %>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<script>
document.addEventListener("DOMContentLoaded", function(){

  const toggleBtn  = document.getElementById("toggleSidebar");
  const sidebar    = document.getElementById("sidebar");
  const toggleIcon = document.getElementById("toggleIcon");

  if (!toggleBtn || !sidebar) return;

  function updateIcon() {
    if (sidebar.classList.contains("collapsed") || sidebar.classList.contains("show")) {
      toggleIcon.classList.remove("bi-list");
      toggleIcon.classList.add("bi-x");
    } else {
      toggleIcon.classList.remove("bi-x");
      toggleIcon.classList.add("bi-list");
    }
  }

  toggleBtn.addEventListener("click", function(){

    if (window.innerWidth < 892) {
      sidebar.classList.toggle("show");
    } else {
      sidebar.classList.toggle("collapsed");
    }

    updateIcon();
  });

  /* Smart Resize Handling */
  window.addEventListener("resize", function(){

    if (window.innerWidth >= 892) {
      sidebar.classList.remove("show");
    } else {
      sidebar.classList.remove("collapsed");
    }

    updateIcon();
  });

});
</script>

</body>
</html>
